#define F_CPU 16000000UL

#include <inttypes.h>
#include <avr/io.h>
#include <avr/interrupt.h>
#include <util/delay.h>
#include <stdlib.h>
#include <avr/pgmspace.h>

#define PIN_DC (1<<7)
// #define PIN_WR (1<<6)
#define PIN_CS (1<<5)	
#define PIN_RESET (1<<4)


// stolen from the nets
/*
const char rom_font[128][8] = { 
  { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, 
  { 0x00, 0x3E, 0x41, 0x55, 0x41, 0x55, 0x49, 0x3E }, 
  { 0x00, 0x3E, 0x7F, 0x6B, 0x7F, 0x6B, 0x77, 0x3E }, 
  { 0x00, 0x22, 0x77, 0x7F, 0x7F, 0x3E, 0x1C, 0x08 }, 
  { 0x00, 0x08, 0x1C, 0x3E, 0x7F, 0x3E, 0x1C, 0x08 }, 
  { 0x00, 0x08, 0x1C, 0x2A, 0x7F, 0x2A, 0x08, 0x1C }, 
  { 0x00, 0x08, 0x1C, 0x3E, 0x7F, 0x3E, 0x08, 0x1C }, 
  { 0x00, 0x00, 0x1C, 0x3E, 0x3E, 0x3E, 0x1C, 0x00 }, 
  { 0xFF, 0xFF, 0xE3, 0xC1, 0xC1, 0xC1, 0xE3, 0xFF }, 
  { 0x00, 0x00, 0x1C, 0x22, 0x22, 0x22, 0x1C, 0x00 }, 
  { 0xFF, 0xFF, 0xE3, 0xDD, 0xDD, 0xDD, 0xE3, 0xFF }, 
  { 0x00, 0x0F, 0x03, 0x05, 0x39, 0x48, 0x48, 0x30 }, 
  { 0x00, 0x08, 0x3E, 0x08, 0x1C, 0x22, 0x22, 0x1C }, 
  { 0x00, 0x18, 0x14, 0x10, 0x10, 0x30, 0x70, 0x60 }, 
  { 0x00, 0x0F, 0x19, 0x11, 0x13, 0x37, 0x76, 0x60 }, 
  { 0x00, 0x08, 0x2A, 0x1C, 0x77, 0x1C, 0x2A, 0x08 }, 
  { 0x00, 0x60, 0x78, 0x7E, 0x7F, 0x7E, 0x78, 0x60 }, 
  { 0x00, 0x03, 0x0F, 0x3F, 0x7F, 0x3F, 0x0F, 0x03 }, 
  { 0x00, 0x08, 0x1C, 0x2A, 0x08, 0x2A, 0x1C, 0x08 }, 
  { 0x00, 0x66, 0x66, 0x66, 0x66, 0x00, 0x66, 0x66 }, 
  { 0x00, 0x3F, 0x65, 0x65, 0x3D, 0x05, 0x05, 0x05 }, 
  { 0x00, 0x0C, 0x32, 0x48, 0x24, 0x12, 0x4C, 0x30 }, 
  { 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0x7F, 0x7F }, 
  { 0x00, 0x08, 0x1C, 0x2A, 0x08, 0x2A, 0x1C, 0x3E }, 
  { 0x00, 0x08, 0x1C, 0x3E, 0x7F, 0x1C, 0x1C, 0x1C }, 
  { 0x00, 0x1C, 0x1C, 0x1C, 0x7F, 0x3E, 0x1C, 0x08 }, 
  { 0x00, 0x08, 0x0C, 0x7E, 0x7F, 0x7E, 0x0C, 0x08 }, 
  { 0x00, 0x08, 0x18, 0x3F, 0x7F, 0x3F, 0x18, 0x08 }, 
  { 0x00, 0x00, 0x00, 0x70, 0x70, 0x70, 0x7F, 0x7F }, 
  { 0x00, 0x00, 0x14, 0x22, 0x7F, 0x22, 0x14, 0x00 }, 
  { 0x00, 0x08, 0x1C, 0x1C, 0x3E, 0x3E, 0x7F, 0x7F }, 
  { 0x00, 0x7F, 0x7F, 0x3E, 0x3E, 0x1C, 0x1C, 0x08 }, 
  { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, 
  { 0x00, 0x18, 0x3C, 0x3C, 0x18, 0x18, 0x00, 0x18 }, 
  { 0x00, 0x36, 0x36, 0x14, 0x00, 0x00, 0x00, 0x00 }, 
  { 0x00, 0x36, 0x36, 0x7F, 0x36, 0x7F, 0x36, 0x36 }, 
  { 0x00, 0x08, 0x1E, 0x20, 0x1C, 0x02, 0x3C, 0x08 }, 
  { 0x00, 0x60, 0x66, 0x0C, 0x18, 0x30, 0x66, 0x06 }, 
  { 0x00, 0x3C, 0x66, 0x3C, 0x28, 0x65, 0x66, 0x3F }, 
  { 0x00, 0x18, 0x18, 0x18, 0x30, 0x00, 0x00, 0x00 }, 
  { 0x00, 0x60, 0x30, 0x18, 0x18, 0x18, 0x30, 0x60 }, 
  { 0x00, 0x06, 0x0C, 0x18, 0x18, 0x18, 0x0C, 0x06 }, 
  { 0x00, 0x00, 0x36, 0x1C, 0x7F, 0x1C, 0x36, 0x00 }, 
  { 0x00, 0x00, 0x08, 0x08, 0x3E, 0x08, 0x08, 0x00 }, 
  { 0x00, 0x00, 0x00, 0x00, 0x30, 0x30, 0x30, 0x60 }, 
  { 0x00, 0x00, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x00 }, 
  { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x60, 0x60 }, 
  { 0x00, 0x00, 0x06, 0x0C, 0x18, 0x30, 0x60, 0x00 }, 
  { 0x00, 0x3C, 0x66, 0x6E, 0x76, 0x66, 0x66, 0x3C }, 
  { 0x00, 0x18, 0x18, 0x38, 0x18, 0x18, 0x18, 0x7E }, 
  { 0x00, 0x3C, 0x66, 0x06, 0x0C, 0x30, 0x60, 0x7E }, 
  { 0x00, 0x3C, 0x66, 0x06, 0x1C, 0x06, 0x66, 0x3C }, 
  { 0x00, 0x0C, 0x1C, 0x2C, 0x4C, 0x7E, 0x0C, 0x0C }, 
  { 0x00, 0x7E, 0x60, 0x7C, 0x06, 0x06, 0x66, 0x3C }, 
  { 0x00, 0x3C, 0x66, 0x60, 0x7C, 0x66, 0x66, 0x3C }, 
  { 0x00, 0x7E, 0x66, 0x0C, 0x0C, 0x18, 0x18, 0x18 }, 
  { 0x00, 0x3C, 0x66, 0x66, 0x3C, 0x66, 0x66, 0x3C }, 
  { 0x00, 0x3C, 0x66, 0x66, 0x3E, 0x06, 0x66, 0x3C }, 
  { 0x00, 0x00, 0x18, 0x18, 0x00, 0x18, 0x18, 0x00 }, 
  { 0x00, 0x00, 0x18, 0x18, 0x00, 0x18, 0x18, 0x30 }, 
  { 0x00, 0x06, 0x0C, 0x18, 0x30, 0x18, 0x0C, 0x06 }, 
  { 0x00, 0x00, 0x00, 0x3C, 0x00, 0x3C, 0x00, 0x00 }, 
  { 0x00, 0x60, 0x30, 0x18, 0x0C, 0x18, 0x30, 0x60 }, 
  { 0x00, 0x3C, 0x66, 0x06, 0x1C, 0x18, 0x00, 0x18 }, 
  { 0x00, 0x38, 0x44, 0x5C, 0x58, 0x42, 0x3C, 0x00 }, 
  { 0x00, 0x3C, 0x66, 0x66, 0x7E, 0x66, 0x66, 0x66 }, 
  { 0x00, 0x7C, 0x66, 0x66, 0x7C, 0x66, 0x66, 0x7C }, 
  { 0x00, 0x3C, 0x66, 0x60, 0x60, 0x60, 0x66, 0x3C }, 
  { 0x00, 0x7C, 0x66, 0x66, 0x66, 0x66, 0x66, 0x7C }, 
  { 0x00, 0x7E, 0x60, 0x60, 0x7C, 0x60, 0x60, 0x7E }, 
  { 0x00, 0x7E, 0x60, 0x60, 0x7C, 0x60, 0x60, 0x60 }, 
  { 0x00, 0x3C, 0x66, 0x60, 0x60, 0x6E, 0x66, 0x3C }, 
  { 0x00, 0x66, 0x66, 0x66, 0x7E, 0x66, 0x66, 0x66 }, 
  { 0x00, 0x3C, 0x18, 0x18, 0x18, 0x18, 0x18, 0x3C }, 
  { 0x00, 0x1E, 0x0C, 0x0C, 0x0C, 0x6C, 0x6C, 0x38 }, 
  { 0x00, 0x66, 0x6C, 0x78, 0x70, 0x78, 0x6C, 0x66 }, 
  { 0x00, 0x60, 0x60, 0x60, 0x60, 0x60, 0x60, 0x7E }, 
  { 0x00, 0x63, 0x77, 0x7F, 0x6B, 0x63, 0x63, 0x63 }, 
  { 0x00, 0x63, 0x73, 0x7B, 0x6F, 0x67, 0x63, 0x63 }, 
  { 0x00, 0x3C, 0x66, 0x66, 0x66, 0x66, 0x66, 0x3C }, 
  { 0x00, 0x7C, 0x66, 0x66, 0x66, 0x7C, 0x60, 0x60 }, 
  { 0x00, 0x3C, 0x66, 0x66, 0x66, 0x6E, 0x3C, 0x06 }, 
  { 0x00, 0x7C, 0x66, 0x66, 0x7C, 0x78, 0x6C, 0x66 }, 
  { 0x00, 0x3C, 0x66, 0x60, 0x3C, 0x06, 0x66, 0x3C }, 
  { 0x00, 0x7E, 0x5A, 0x18, 0x18, 0x18, 0x18, 0x18 }, 
  { 0x00, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x3E }, 
  { 0x00, 0x66, 0x66, 0x66, 0x66, 0x66, 0x3C, 0x18 }, 
  { 0x00, 0x63, 0x63, 0x63, 0x6B, 0x7F, 0x77, 0x63 }, 
  { 0x00, 0x63, 0x63, 0x36, 0x1C, 0x36, 0x63, 0x63 }, 
  { 0x00, 0x66, 0x66, 0x66, 0x3C, 0x18, 0x18, 0x18 }, 
  { 0x00, 0x7E, 0x06, 0x0C, 0x18, 0x30, 0x60, 0x7E }, 
  { 0x00, 0x1E, 0x18, 0x18, 0x18, 0x18, 0x18, 0x1E }, 
  { 0x00, 0x00, 0x60, 0x30, 0x18, 0x0C, 0x06, 0x00 }, 
  { 0x00, 0x78, 0x18, 0x18, 0x18, 0x18, 0x18, 0x78 }, 
  { 0x00, 0x08, 0x14, 0x22, 0x41, 0x00, 0x00, 0x00 }, 
  { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F }, 
  { 0x00, 0x0C, 0x0C, 0x06, 0x00, 0x00, 0x00, 0x00 }, 
  { 0x00, 0x00, 0x00, 0x3C, 0x06, 0x3E, 0x66, 0x3E }, 
  { 0x00, 0x60, 0x60, 0x60, 0x7C, 0x66, 0x66, 0x7C }, 
  { 0x00, 0x00, 0x00, 0x3C, 0x66, 0x60, 0x66, 0x3C }, 
  { 0x00, 0x06, 0x06, 0x06, 0x3E, 0x66, 0x66, 0x3E }, 
  { 0x00, 0x00, 0x00, 0x3C, 0x66, 0x7E, 0x60, 0x3C }, 
  { 0x00, 0x1C, 0x36, 0x30, 0x30, 0x7C, 0x30, 0x30 }, 
  { 0x00, 0x00, 0x3E, 0x66, 0x66, 0x3E, 0x06, 0x3C }, 
  { 0x00, 0x60, 0x60, 0x60, 0x7C, 0x66, 0x66, 0x66 }, 
  { 0x00, 0x00, 0x18, 0x00, 0x18, 0x18, 0x18, 0x3C }, 
  { 0x00, 0x0C, 0x00, 0x0C, 0x0C, 0x6C, 0x6C, 0x38 }, 
  { 0x00, 0x60, 0x60, 0x66, 0x6C, 0x78, 0x6C, 0x66 }, 
  { 0x00, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18 }, 
  { 0x00, 0x00, 0x00, 0x63, 0x77, 0x7F, 0x6B, 0x6B }, 
  { 0x00, 0x00, 0x00, 0x7C, 0x7E, 0x66, 0x66, 0x66 }, 
  { 0x00, 0x00, 0x00, 0x3C, 0x66, 0x66, 0x66, 0x3C }, 
  { 0x00, 0x00, 0x7C, 0x66, 0x66, 0x7C, 0x60, 0x60 }, 
  { 0x00, 0x00, 0x3C, 0x6C, 0x6C, 0x3C, 0x0D, 0x0F }, 
  { 0x00, 0x00, 0x00, 0x7C, 0x66, 0x66, 0x60, 0x60 }, 
  { 0x00, 0x00, 0x00, 0x3E, 0x40, 0x3C, 0x02, 0x7C }, 
  { 0x00, 0x00, 0x18, 0x18, 0x7E, 0x18, 0x18, 0x18 }, 
  { 0x00, 0x00, 0x00, 0x66, 0x66, 0x66, 0x66, 0x3E }, 
  { 0x00, 0x00, 0x00, 0x00, 0x66, 0x66, 0x3C, 0x18 }, 
  { 0x00, 0x00, 0x00, 0x63, 0x6B, 0x6B, 0x6B, 0x3E }, 
  { 0x00, 0x00, 0x00, 0x66, 0x3C, 0x18, 0x3C, 0x66 }, 
  { 0x00, 0x00, 0x00, 0x66, 0x66, 0x3E, 0x06, 0x3C }, 
  { 0x00, 0x00, 0x00, 0x3C, 0x0C, 0x18, 0x30, 0x3C }, 
  { 0x00, 0x0E, 0x18, 0x18, 0x30, 0x18, 0x18, 0x0E }, 
  { 0x00, 0x18, 0x18, 0x18, 0x00, 0x18, 0x18, 0x18 }, 
  { 0x00, 0x70, 0x18, 0x18, 0x0C, 0x18, 0x18, 0x70 }, 
  { 0x00, 0x00, 0x00, 0x3A, 0x6C, 0x00, 0x00, 0x00 }, 
  { 0x00, 0x08, 0x1C, 0x36, 0x63, 0x41, 0x41, 0x7F }
};
/*
const unsigned char rom_font[2048] =
{
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,	// Char 000 (.)
	0x7E, 0x81, 0xA5, 0x81, 0xA5, 0x99, 0x81, 0x7E,	// Char 001 (.)
	0x3C, 0x7E, 0xDB, 0xFF, 0xC3, 0x7E, 0x3C, 0x00,	// Char 002 (.)
	0x00, 0x6C, 0xFE, 0xFE, 0x7C, 0x38, 0x10, 0x00,	// Char 003 (.)
	0x10, 0x38, 0x7C, 0xFE, 0x7C, 0x38, 0x10, 0x00,	// Char 004 (.)
	0x00, 0x3C, 0x18, 0xFF, 0xFF, 0x08, 0x18, 0x00,	// Char 005 (.)
	0x10, 0x38, 0x7C, 0xFE, 0xFE, 0x10, 0x38, 0x00,	// Char 006 (.)
	0x00, 0x00, 0x18, 0x3C, 0x18, 0x00, 0x00, 0x00,	// Char 007 (.)
	0xFF, 0xFF, 0xE7, 0xC3, 0xE7, 0xFF, 0xFF, 0xFF,	// Char 008 (.)
	0x00, 0x3C, 0x42, 0x81, 0x81, 0x42, 0x3C, 0x00,	// Char 009 (.)
	0xFF, 0xC3, 0xBD, 0x7E, 0x7E, 0xBD, 0xC3, 0xFF,	// Char 010 (.)
	0x1F, 0x07, 0x0D, 0x7C, 0xC6, 0xC6, 0x7C, 0x00,	// Char 011 (.)
	0x00, 0x7E, 0xC3, 0xC3, 0x7E, 0x18, 0x7E, 0x18,	// Char 012 (.)
	0x04, 0x06, 0x07, 0x04, 0x04, 0xFC, 0xF8, 0x00,	// Char 013 (.)
	0x0C, 0x0A, 0x0D, 0x0B, 0xF9, 0xF9, 0x1F, 0x1F,	// Char 014 (.)
	0x00, 0x92, 0x7C, 0x6C, 0xC6, 0x6C, 0x7C, 0x92,	// Char 015 (.)
	0x00, 0x00, 0x60, 0x78, 0x7E, 0x78, 0x60, 0x00,	// Char 016 (.)
	0x00, 0x00, 0x06, 0x1E, 0x7E, 0x1E, 0x06, 0x00,	// Char 017 (.)
	0x18, 0x7E, 0x18, 0x18, 0x18, 0x18, 0x7E, 0x18,	// Char 018 (.)
	0x24, 0x24, 0x24, 0x24, 0x24, 0x00, 0x24, 0x00,	// Char 019 (.)
	0xFF, 0xB6, 0x76, 0x36, 0x36, 0x36, 0x36, 0x00,	// Char 020 (.)
	0x7E, 0xC1, 0xDC, 0x22, 0x22, 0x1F, 0x83, 0x7E,	// Char 021 (.)
	0x00, 0x00, 0x00, 0x7E, 0x7E, 0x00, 0x00, 0x00,	// Char 022 (.)
	0x18, 0x7E, 0x18, 0x18, 0x7E, 0x18, 0x00, 0xFF,	// Char 023 (.)
	0x08, 0x1C, 0x08, 0x08, 0x08, 0x08, 0x08, 0x00,	// Char 024 (.)
	0x08, 0x08, 0x08, 0x08, 0x08, 0x1C, 0x08, 0x00,	// Char 025 (.)
	0x00, 0x00, 0x02, 0xFF, 0x02, 0x00, 0x00, 0x00,	// Char 026 (.)
	0x00, 0x00, 0x40, 0xFF, 0x40, 0x00, 0x00, 0x00,	// Char 027 (.)
	0x00, 0x00, 0x00, 0xC0, 0xC0, 0xC0, 0xFF, 0x00,	// Char 028 (.)
	0x00, 0x24, 0x66, 0xFF, 0x66, 0x24, 0x00, 0x00,	// Char 029 (.)
	0x00, 0x00, 0x10, 0x38, 0x7C, 0xFE, 0x00, 0x00,	// Char 030 (.)
	0x00, 0x00, 0x00, 0xFE, 0x7C, 0x38, 0x10, 0x00,	// Char 031 (.)
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,	// Char 032 ( )
	0x10, 0x10, 0x10, 0x10, 0x10, 0x00, 0x10, 0x00,	// Char 033 (!)
	0x44, 0x22, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,	// Char 034 (")
	0x28, 0x28, 0xFE, 0x28, 0xFE, 0x28, 0x28, 0x00,	// Char 035 (#)
	0x28, 0x7C, 0xA8, 0x7C, 0x2A, 0x7C, 0x28, 0x00,	// Char 036 ($)
	0x60, 0x94, 0x68, 0x10, 0x2C, 0x52, 0x8C, 0x00,	// Char 037 (%)
	0x30, 0x48, 0x30, 0x48, 0x86, 0x84, 0x78, 0x00,	// Char 038 (&)
	0x04, 0x04, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00,	// Char 039 (')
	0x10, 0x20, 0x40, 0x40, 0x40, 0x20, 0x10, 0x00,	// Char 040 (()
	0x10, 0x08, 0x04, 0x04, 0x04, 0x08, 0x10, 0x00,	// Char 041 ())
	0x00, 0x54, 0x38, 0x7C, 0x38, 0x54, 0x00, 0x00,	// Char 042 (*)
	0x00, 0x08, 0x08, 0x3E, 0x08, 0x08, 0x00, 0x00,	// Char 043 (+)
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x10,	// Char 044 (,)
	0x00, 0x00, 0x00, 0x7E, 0x00, 0x00, 0x00, 0x00,	// Char 045 (-)
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x00,	// Char 046 (.)
	0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80, 0x00,	// Char 047 (/)
	0x00, 0x18, 0x24, 0x2C, 0x34, 0x24, 0x18, 0x00,	// Char 048 (0)
	0x00, 0x10, 0x30, 0x10, 0x10, 0x10, 0x38, 0x00,	// Char 049 (1)
	0x00, 0x18, 0x24, 0x04, 0x18, 0x20, 0x3C, 0x00,	// Char 050 (2)
	0x00, 0x38, 0x04, 0x18, 0x04, 0x04, 0x38, 0x00,	// Char 051 (3)
	0x00, 0x20, 0x28, 0x28, 0x3C, 0x08, 0x08, 0x00,	// Char 052 (4)
	0x00, 0x3C, 0x20, 0x38, 0x04, 0x04, 0x38, 0x00,	// Char 053 (5)
	0x00, 0x1C, 0x20, 0x38, 0x24, 0x24, 0x18, 0x00,	// Char 054 (6)
	0x00, 0x3C, 0x04, 0x08, 0x10, 0x10, 0x10, 0x00,	// Char 055 (7)
	0x00, 0x18, 0x24, 0x18, 0x24, 0x24, 0x18, 0x00,	// Char 056 (8)
	0x00, 0x18, 0x24, 0x24, 0x1C, 0x04, 0x38, 0x00,	// Char 057 (9)
	0x00, 0x10, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00,	// Char 058 (:)
	0x00, 0x10, 0x00, 0x00, 0x00, 0x10, 0x20, 0x00,	// Char 059 (;)
	0x00, 0x08, 0x10, 0x20, 0x10, 0x08, 0x00, 0x00,	// Char 060 (<)
	0x00, 0x00, 0x7E, 0x00, 0x7E, 0x00, 0x00, 0x00,	// Char 061 (=)
	0x00, 0x20, 0x10, 0x08, 0x10, 0x20, 0x00, 0x00,	// Char 062 (>)
	0x7C, 0x82, 0x04, 0x08, 0x10, 0x00, 0x10, 0x00,	// Char 063 (?)
	0x7C, 0x82, 0x9A, 0xAA, 0xAA, 0x9E, 0x7C, 0x00,	// Char 064 (@)
	0x00, 0x18, 0x24, 0x24, 0x3C, 0x24, 0x24, 0x00,	// Char 065 (A)
	0x00, 0x38, 0x24, 0x38, 0x24, 0x24, 0x38, 0x00,	// Char 066 (B)
	0x00, 0x18, 0x24, 0x20, 0x20, 0x24, 0x18, 0x00,	// Char 067 (C)
	0x00, 0x38, 0x24, 0x24, 0x24, 0x24, 0x38, 0x00,	// Char 068 (D)
	0x00, 0x3C, 0x20, 0x38, 0x20, 0x20, 0x3C, 0x00,	// Char 069 (E)
	0x00, 0x3C, 0x20, 0x38, 0x20, 0x20, 0x20, 0x00,	// Char 070 (F)
	0x00, 0x18, 0x24, 0x20, 0x2C, 0x24, 0x18, 0x00,	// Char 071 (G)
	0x00, 0x24, 0x24, 0x3C, 0x24, 0x24, 0x24, 0x00,	// Char 072 (H)
	0x00, 0x38, 0x10, 0x10, 0x10, 0x10, 0x38, 0x00,	// Char 073 (I)
	0x00, 0x04, 0x04, 0x04, 0x04, 0x24, 0x18, 0x00,	// Char 074 (J)
	0x00, 0x28, 0x28, 0x30, 0x28, 0x24, 0x24, 0x00,	// Char 075 (K)
	0x00, 0x20, 0x20, 0x20, 0x20, 0x20, 0x3C, 0x00,	// Char 076 (L)
	0x00, 0x44, 0x6C, 0x54, 0x44, 0x44, 0x44, 0x00,	// Char 077 (M)
	0x00, 0x24, 0x34, 0x34, 0x2C, 0x2C, 0x24, 0x00,	// Char 078 (N)
	0x00, 0x18, 0x24, 0x24, 0x24, 0x24, 0x18, 0x00,	// Char 079 (O)
	0x00, 0x38, 0x24, 0x24, 0x38, 0x20, 0x20, 0x00,	// Char 080 (P)
	0x00, 0x18, 0x24, 0x24, 0x24, 0x24, 0x1C, 0x02,	// Char 081 (Q)
	0x00, 0x38, 0x24, 0x24, 0x38, 0x24, 0x24, 0x00,	// Char 082 (R)
	0x00, 0x1C, 0x20, 0x18, 0x04, 0x04, 0x38, 0x00,	// Char 083 (S)
	0x00, 0x38, 0x10, 0x10, 0x10, 0x10, 0x10, 0x00,	// Char 084 (T)
	0x00, 0x24, 0x24, 0x24, 0x24, 0x24, 0x3C, 0x00,	// Char 085 (U)
	0x00, 0x24, 0x24, 0x24, 0x24, 0x14, 0x0C, 0x00,	// Char 086 (V)
	0x00, 0x44, 0x44, 0x44, 0x54, 0x6C, 0x44, 0x00,	// Char 087 (W)
	0x00, 0x24, 0x24, 0x10, 0x08, 0x24, 0x24, 0x00,	// Char 088 (X)
	0x00, 0x22, 0x22, 0x14, 0x08, 0x08, 0x08, 0x00,	// Char 089 (Y)
	0x00, 0x3C, 0x04, 0x08, 0x10, 0x20, 0x3C, 0x00,	// Char 090 (Z)
	0x1C, 0x10, 0x10, 0x10, 0x10, 0x10, 0x1C, 0x00,	// Char 091 ([)
	0x80, 0x40, 0x20, 0x10, 0x08, 0x04, 0x02, 0x00,	// Char 092 (\)
	0x70, 0x10, 0x10, 0x10, 0x10, 0x10, 0x70, 0x00,	// Char 093 (])
	0x00, 0x00, 0x10, 0x38, 0x6C, 0xC6, 0x00, 0x00,	// Char 094 (^)
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF,	// Char 095 (_)
	0x10, 0x10, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00,	// Char 096 (`)
	0x00, 0x00, 0x18, 0x24, 0x3C, 0x24, 0x24, 0x00,	// Char 097 (a)
	0x00, 0x00, 0x38, 0x24, 0x38, 0x24, 0x38, 0x00,	// Char 098 (b)
	0x00, 0x00, 0x18, 0x24, 0x20, 0x24, 0x18, 0x00,	// Char 099 (c)
	0x00, 0x00, 0x38, 0x24, 0x24, 0x24, 0x38, 0x00,	// Char 100 (d)
	0x00, 0x00, 0x3C, 0x20, 0x38, 0x20, 0x3C, 0x00,	// Char 101 (e)
	0x00, 0x00, 0x3C, 0x20, 0x38, 0x20, 0x20, 0x00,	// Char 102 (f)
	0x00, 0x00, 0x1C, 0x20, 0x2C, 0x24, 0x18, 0x00,	// Char 103 (g)
	0x00, 0x00, 0x24, 0x24, 0x3C, 0x24, 0x24, 0x00,	// Char 104 (h)
	0x00, 0x00, 0x1C, 0x08, 0x08, 0x08, 0x1C, 0x00,	// Char 105 (i)
	0x00, 0x00, 0x04, 0x04, 0x04, 0x24, 0x18, 0x00,	// Char 106 (j)
	0x00, 0x00, 0x24, 0x28, 0x30, 0x28, 0x24, 0x00,	// Char 107 (k)
	0x00, 0x00, 0x20, 0x20, 0x20, 0x20, 0x3C, 0x00,	// Char 108 (l)
	0x00, 0x00, 0x42, 0x66, 0x5A, 0x42, 0x42, 0x00,	// Char 109 (m)
	0x00, 0x00, 0x24, 0x34, 0x3C, 0x2C, 0x24, 0x00,	// Char 110 (n)
	0x00, 0x00, 0x18, 0x24, 0x24, 0x24, 0x18, 0x00,	// Char 111 (o)
	0x00, 0x00, 0x38, 0x24, 0x38, 0x20, 0x20, 0x00,	// Char 112 (p)
	0x00, 0x00, 0x18, 0x24, 0x24, 0x24, 0x1C, 0x02,	// Char 113 (q)
	0x00, 0x00, 0x38, 0x24, 0x38, 0x24, 0x24, 0x00,	// Char 114 (r)
	0x00, 0x00, 0x1C, 0x20, 0x18, 0x04, 0x38, 0x00,	// Char 115 (s)
	0x00, 0x00, 0x38, 0x10, 0x10, 0x10, 0x10, 0x00,	// Char 116 (t)
	0x00, 0x00, 0x24, 0x24, 0x24, 0x24, 0x3C, 0x00,	// Char 117 (u)
	0x00, 0x00, 0x24, 0x24, 0x24, 0x14, 0x0C, 0x00,	// Char 118 (v)
	0x00, 0x00, 0x42, 0x42, 0x5A, 0x66, 0x42, 0x00,	// Char 119 (w)
	0x00, 0x00, 0x44, 0x28, 0x10, 0x28, 0x44, 0x00,	// Char 120 (x)
	0x00, 0x00, 0x44, 0x28, 0x10, 0x10, 0x10, 0x00,	// Char 121 (y)
	0x00, 0x00, 0x7C, 0x08, 0x10, 0x20, 0x7C, 0x00,	// Char 122 (z)
	0x0E, 0x10, 0x10, 0x20, 0x10, 0x10, 0x0E, 0x00,	// Char 123 ({)
	0x08, 0x08, 0x08, 0x00, 0x08, 0x08, 0x08, 0x00,	// Char 124 (|)
	0xE0, 0x10, 0x10, 0x08, 0x10, 0x10, 0xE0, 0x00,	// Char 125 (})
	0x00, 0x00, 0x60, 0x92, 0x0C, 0x00, 0x00, 0x00,	// Char 126 (~)
	0x00, 0x00, 0x18, 0x24, 0x42, 0xFF, 0x00, 0x00,	// Char 127 (.)
	0x7C, 0x82, 0x80, 0x80, 0x82, 0x7C, 0x08, 0x30,	// Char 128 (.)
	0x48, 0x00, 0x84, 0x84, 0x84, 0x84, 0x7C, 0x00,	// Char 129 (.)
	0x0C, 0x10, 0x7C, 0x82, 0xFC, 0x80, 0x7C, 0x00,	// Char 130 (.)
	0x18, 0x24, 0x7C, 0x02, 0x7E, 0x82, 0x7C, 0x00,	// Char 131 (.)
	0x24, 0x00, 0x7C, 0x02, 0x7E, 0x82, 0x7C, 0x00,	// Char 132 (.)
	0x18, 0x04, 0x7C, 0x02, 0x7E, 0x82, 0x7C, 0x00,	// Char 133 (.)
	0x10, 0x00, 0x7C, 0x02, 0x7E, 0x82, 0x7C, 0x00,	// Char 134 (.)
	0x00, 0x00, 0x7C, 0x80, 0x80, 0x7C, 0x08, 0x30,	// Char 135 (.)
	0x18, 0x24, 0x7C, 0x82, 0xFC, 0x80, 0x7C, 0x00,	// Char 136 (.)
	0x24, 0x00, 0x7C, 0x82, 0xFC, 0x80, 0x7C, 0x00,	// Char 137 (.)
	0x30, 0x08, 0x7C, 0x82, 0xFC, 0x80, 0x7C, 0x00,	// Char 138 (.)
	0x24, 0x00, 0x18, 0x08, 0x08, 0x08, 0x1C, 0x00,	// Char 139 (.)
	0x18, 0x24, 0x18, 0x08, 0x08, 0x08, 0x1C, 0x00,	// Char 140 (.)
	0x18, 0x04, 0x18, 0x08, 0x08, 0x08, 0x1C, 0x00,	// Char 141 (.)
	0x24, 0x00, 0x38, 0x44, 0x7C, 0x44, 0x44, 0x00,	// Char 142 (.)
	0x18, 0x00, 0x38, 0x44, 0x7C, 0x44, 0x44, 0x00,	// Char 143 (.)
	0x0C, 0x10, 0xFE, 0x40, 0x78, 0x40, 0xFE, 0x00,	// Char 144 (.)
	0x00, 0x00, 0x7C, 0x1A, 0x7E, 0xD8, 0x7E, 0x00,	// Char 145 (.)
	0x7E, 0xD8, 0xD8, 0xDE, 0xF8, 0xD8, 0xDE, 0x00,	// Char 146 (.)
	0x18, 0x24, 0x7C, 0xC6, 0xC6, 0xC6, 0x7C, 0x00,	// Char 147 (.)
	0x66, 0x00, 0x7C, 0xC6, 0xC6, 0xC6, 0x7C, 0x00,	// Char 148 (.)
	0x38, 0x0C, 0x7C, 0xC6, 0xC6, 0xC6, 0x7C, 0x00,	// Char 149 (.)
	0x18, 0x24, 0xC6, 0xC6, 0xC6, 0xC6, 0x7E, 0x00,	// Char 150 (.)
	0x38, 0x0C, 0xC6, 0xC6, 0xC6, 0xC6, 0x7E, 0x00,	// Char 151 (.)
	0x66, 0x00, 0xC6, 0xC6, 0xC6, 0x7E, 0x06, 0x7C,	// Char 152 (.)
	0x66, 0x7C, 0xC6, 0xC6, 0xC6, 0xC6, 0x7C, 0x00,	// Char 153 (.)
	0xC6, 0x00, 0xC6, 0xC6, 0xC6, 0xC6, 0x7C, 0x00,	// Char 154 (.)
	0x18, 0x7C, 0xC6, 0xC0, 0xC6, 0x7C, 0x18, 0x00,	// Char 155 (.)
	0x1E, 0x32, 0x30, 0x78, 0x30, 0x70, 0xFE, 0x00,	// Char 156 (.)
	0x66, 0x3C, 0x18, 0x7E, 0x18, 0x3C, 0x18, 0x00,	// Char 157 (.)
	0xFC, 0xC6, 0xFC, 0xC0, 0xCC, 0xDE, 0xCC, 0x0E,	// Char 158 (.)
	0x00, 0x1C, 0x32, 0x30, 0xFC, 0x30, 0xF0, 0x00,	// Char 159 (.)
	0x0E, 0x18, 0x7C, 0x06, 0x7E, 0xC6, 0x7E, 0x00,	// Char 160 (.)
	0x1A, 0x30, 0x38, 0x18, 0x18, 0x18, 0x3C, 0x00,	// Char 161 (.)
	0x0E, 0x18, 0x7C, 0xC6, 0xC6, 0xC6, 0x7C, 0x00,	// Char 162 (.)
	0x0E, 0x18, 0xC6, 0xC6, 0xC6, 0xC6, 0x7E, 0x00,	// Char 163 (.)
	0x66, 0x98, 0xFC, 0xC6, 0xC6, 0xC6, 0xC6, 0x00,	// Char 164 (.)
	0x66, 0x98, 0xE6, 0xF6, 0xDE, 0xCE, 0xC6, 0x00,	// Char 165 (.)
	0x7C, 0x06, 0x7E, 0xC6, 0x7E, 0x00, 0xFE, 0x00,	// Char 166 (.)
	0x7C, 0xC6, 0xC6, 0xC6, 0x7C, 0x00, 0xFE, 0x00,	// Char 167 (.)
	0x18, 0x00, 0x18, 0x30, 0x60, 0xC6, 0x7C, 0x00,	// Char 168 (.)
	0x00, 0x00, 0xFE, 0xC0, 0xC0, 0xC0, 0xC0, 0x00,	// Char 169 (.)
	0x00, 0x00, 0xFE, 0x06, 0x06, 0x06, 0x06, 0x00,	// Char 170 (.)
	0x80, 0x80, 0x80, 0x9C, 0x02, 0x08, 0x1E, 0x00,	// Char 171 (.)
	0x80, 0x80, 0x80, 0x90, 0x14, 0x1E, 0x04, 0x00,	// Char 172 (.)
	0x10, 0x00, 0x10, 0x10, 0x10, 0x10, 0x10, 0x00,	// Char 173 (.)
	0x00, 0x22, 0x44, 0x88, 0x44, 0x22, 0x00, 0x00,	// Char 174 (.)
	0x00, 0x88, 0x44, 0x22, 0x44, 0x88, 0x00, 0x00,	// Char 175 (.)
	0xAA, 0xAA, 0xAA, 0xAA, 0xAA, 0xAA, 0xAA, 0xAA,	// Char 176 (.)
	0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55, 0x55,	// Char 177 (.)
	0x44, 0x22, 0x44, 0x22, 0x44, 0x22, 0x44, 0x22,	// Char 178 (.)
	0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08,	// Char 179 (.)
	0x08, 0x08, 0x08, 0xF8, 0x08, 0x08, 0x08, 0x08,	// Char 180 (.)
	0x08, 0x08, 0x08, 0xF8, 0x08, 0xF8, 0x08, 0x08,	// Char 181 (.)
	0x14, 0x14, 0x14, 0xF4, 0x14, 0x14, 0x14, 0x14,	// Char 182 (.)
	0x00, 0x00, 0x00, 0xFC, 0x14, 0x14, 0x14, 0x14,	// Char 183 (.)
	0x00, 0x00, 0x00, 0xF8, 0x08, 0xF8, 0x08, 0x08,	// Char 184 (.)
	0x14, 0x14, 0x14, 0xF4, 0x04, 0xF4, 0x14, 0x14,	// Char 185 (.)
	0x14, 0x14, 0x14, 0x14, 0x14, 0x14, 0x14, 0x14,	// Char 186 (.)
	0x00, 0x00, 0x00, 0xFC, 0x04, 0xF4, 0x14, 0x14,	// Char 187 (.)
	0x14, 0x14, 0x14, 0xF4, 0x04, 0xFC, 0x00, 0x00,	// Char 188 (.)
	0x14, 0x14, 0x14, 0xFC, 0x00, 0x00, 0x00, 0x00,	// Char 189 (.)
	0x08, 0x08, 0x08, 0xF8, 0x08, 0xF8, 0x00, 0x00,	// Char 190 (.)
	0x00, 0x00, 0x00, 0xF8, 0x08, 0x08, 0x08, 0x08,	// Char 191 (.)
	0x08, 0x08, 0x08, 0x0F, 0x00, 0x00, 0x00, 0x00,	// Char 192 (.)
	0x08, 0x08, 0x08, 0xFF, 0x00, 0x00, 0x00, 0x00,	// Char 193 (.)
	0x00, 0x00, 0x00, 0xFF, 0x08, 0x08, 0x08, 0x08,	// Char 194 (.)
	0x08, 0x08, 0x08, 0x0F, 0x08, 0x08, 0x08, 0x08,	// Char 195 (.)
	0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0x00, 0x00,	// Char 196 (.)
	0x08, 0x08, 0x08, 0xFF, 0x08, 0x08, 0x08, 0x08,	// Char 197 (.)
	0x08, 0x08, 0x08, 0x0F, 0x08, 0x0F, 0x08, 0x08,	// Char 198 (.)
	0x14, 0x14, 0x14, 0x17, 0x14, 0x14, 0x14, 0x14,	// Char 199 (.)
	0x14, 0x14, 0x14, 0x17, 0x10, 0x1F, 0x00, 0x00,	// Char 200 (.)
	0x00, 0x00, 0x00, 0x1F, 0x10, 0x17, 0x14, 0x14,	// Char 201 (.)
	0x14, 0x14, 0x14, 0xF7, 0x00, 0xFF, 0x00, 0x00,	// Char 202 (.)
	0x00, 0x00, 0x00, 0xFF, 0x00, 0xF7, 0x14, 0x14,	// Char 203 (.)
	0x14, 0x14, 0x14, 0x17, 0x10, 0x17, 0x14, 0x14,	// Char 204 (.)
	0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0x00,	// Char 205 (.)
	0x14, 0x14, 0x14, 0xF7, 0x00, 0xF7, 0x14, 0x14,	// Char 206 (.)
	0x08, 0x08, 0x08, 0xFF, 0x00, 0xFF, 0x00, 0x00,	// Char 207 (.)
	0x14, 0x14, 0x14, 0xFF, 0x00, 0x00, 0x00, 0x00,	// Char 208 (.)
	0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x08, 0x08,	// Char 209 (.)
	0x00, 0x00, 0x00, 0xFF, 0x14, 0x14, 0x14, 0x14,	// Char 210 (.)
	0x14, 0x14, 0x14, 0x1F, 0x00, 0x00, 0x00, 0x00,	// Char 211 (.)
	0x08, 0x08, 0x08, 0x0F, 0x08, 0x0F, 0x00, 0x00,	// Char 212 (.)
	0x00, 0x00, 0x00, 0x1F, 0x10, 0x1F, 0x10, 0x10,	// Char 213 (.)
	0x00, 0x00, 0x00, 0x1F, 0x14, 0x14, 0x14, 0x14,	// Char 214 (.)
	0x14, 0x14, 0x14, 0xFF, 0x14, 0x14, 0x14, 0x14,	// Char 215 (.)
	0x08, 0x08, 0x08, 0xFF, 0x08, 0xFF, 0x08, 0x08,	// Char 216 (.)
	0x08, 0x08, 0x08, 0xF8, 0x00, 0x00, 0x00, 0x00,	// Char 217 (.)
	0x00, 0x00, 0x00, 0x0F, 0x08, 0x08, 0x08, 0x08,	// Char 218 (.)
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,	// Char 219 (.)
	0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF,	// Char 220 (.)
	0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0,	// Char 221 (.)
	0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F,	// Char 222 (.)
	0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00,	// Char 223 (.)
	0x00, 0x00, 0x77, 0x98, 0x98, 0x77, 0x00, 0x00,	// Char 224 (.)
	0x1C, 0x36, 0x66, 0xFC, 0xC6, 0xC6, 0xFC, 0xC0,	// Char 225 (.)
	0xFE, 0x62, 0x60, 0x60, 0x60, 0x60, 0x60, 0x00,	// Char 226 (.)
	0x00, 0x00, 0xFF, 0x66, 0x66, 0x66, 0x66, 0x00,	// Char 227 (.)
	0xFE, 0x62, 0x30, 0x18, 0x30, 0x62, 0xFE, 0x00,	// Char 228 (.)
	0x00, 0x00, 0x3F, 0x66, 0xC6, 0xCC, 0x78, 0x00,	// Char 229 (.)
	0x00, 0x00, 0x33, 0x33, 0x33, 0x3E, 0x30, 0xF0,	// Char 230 (.)
	0x00, 0x00, 0xFF, 0x18, 0x18, 0x18, 0x18, 0x00,	// Char 231 (.)
	0x3C, 0x18, 0x3C, 0x66, 0x66, 0x3C, 0x18, 0x3C,	// Char 232 (.)
	0x00, 0x7C, 0xC6, 0xFE, 0xC6, 0x7C, 0x00, 0x00,	// Char 233 (.)
	0x00, 0x7E, 0xC3, 0xC3, 0xC3, 0x66, 0xE7, 0x00,	// Char 234 (.)
	0x1E, 0x19, 0x3C, 0x66, 0xC6, 0xCC, 0x78, 0x00,	// Char 235 (.)
	0x00, 0x00, 0x66, 0x99, 0x99, 0x66, 0x00, 0x00,	// Char 236 (.)
	0x00, 0x03, 0x7C, 0xCE, 0xE6, 0x7C, 0xC0, 0x00,	// Char 237 (.)
	0x00, 0x3E, 0xC0, 0xFE, 0xC0, 0x3E, 0x00, 0x00,	// Char 238 (.)
	0x00, 0x7E, 0xC3, 0xC3, 0xC3, 0xC3, 0x00, 0x00,	// Char 239 (.)
	0x00, 0xFE, 0x00, 0xFE, 0x00, 0xFE, 0x00, 0x00,	// Char 240 (.)
	0x08, 0x08, 0x3E, 0x08, 0x08, 0x00, 0x3E, 0x00,	// Char 241 (.)
	0x30, 0x08, 0x04, 0x08, 0x30, 0x00, 0x7E, 0x00,	// Char 242 (.)
	0x18, 0x20, 0x40, 0x20, 0x18, 0x00, 0xFC, 0x00,	// Char 243 (.)
	0x00, 0x0E, 0x11, 0x10, 0x10, 0x10, 0x10, 0x10,	// Char 244 (.)
	0x10, 0x10, 0x10, 0x10, 0x10, 0x90, 0x60, 0x00,	// Char 245 (.)
	0x00, 0x08, 0x00, 0x3E, 0x00, 0x08, 0x00, 0x00,	// Char 246 (.)
	0x00, 0x76, 0xDC, 0x00, 0x76, 0xDC, 0x00, 0x00,	// Char 247 (.)
	0x3C, 0x66, 0x3C, 0x00, 0x00, 0x00, 0x00, 0x00,	// Char 248 (.)
	0x00, 0x18, 0x3C, 0x18, 0x00, 0x00, 0x00, 0x00,	// Char 249 (.)
	0x00, 0x00, 0x00, 0x00, 0x18, 0x00, 0x00, 0x00,	// Char 250 (.)
	0x0F, 0x0C, 0x0C, 0x0C, 0xEC, 0x6C, 0x38, 0x00,	// Char 251 (.)
	0x50, 0x68, 0x48, 0x48, 0x00, 0x00, 0x00, 0x00,	// Char 252 (.)
	0xF0, 0x30, 0xC0, 0xF0, 0x00, 0x00, 0x00, 0x00,	// Char 253 (.)
	0x00, 0x00, 0x00, 0x3C, 0x3C, 0x3C, 0x3C, 0x00,	// Char 254 (.)
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00	// Char 255 (.)
};
*/
const char rom_font[896] = {
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	4,0,0,0,0,0,0,
	2,1,1,0,1,0,0,
	4,1,1,2,4,4,0,
	6,10,31,10,31,10,0,
	4,6,3,2,6,3,0,
	6,11,11,4,26,26,0,
	5,2,5,2,5,11,0,
	2,1,1,0,0,0,0,
	3,2,1,1,1,2,0,
	3,1,2,2,2,1,0,
	4,5,2,5,0,0,0,
	4,0,2,7,2,0,0,
	2,0,0,0,0,1,1,
	4,0,0,7,0,0,0,
	2,0,0,0,0,1,0,
	4,0,4,2,1,0,0,
	4,7,5,5,5,7,0,
	4,2,3,2,2,7,0,
	4,3,4,2,1,7,0,
	4,7,4,6,4,7,0,
	4,5,5,7,4,4,0,
	4,7,1,7,4,7,0,
	4,7,1,7,5,7,0,
	4,7,4,2,1,1,0,
	4,7,5,7,5,7,0,
	4,7,5,7,4,7,0,
	2,0,1,0,1,0,0,
	2,0,1,0,1,1,0,
	4,4,2,1,2,4,0,
	4,0,7,0,7,0,0,
	4,1,2,4,2,1,0,
	5,7,8,6,0,2,0,
	6,14,21,13,1,14,0,
	5,6,9,15,9,9,0,
	5,7,9,7,9,7,0,
	5,6,9,1,9,6,0,
	5,7,9,9,9,7,0,
	4,7,1,3,1,7,0,
	4,7,1,3,1,1,0,
	5,14,1,13,9,6,0,
	5,9,9,15,9,9,0,
	4,7,2,2,2,7,0,
	4,4,4,4,4,3,0,
	5,9,5,3,5,9,0,
	4,1,1,1,1,7,0,
	6,17,27,21,17,17,0,
	5,9,11,13,9,9,0,
	5,6,9,9,9,6,0,
	5,7,9,7,1,1,0,
	5,6,9,9,13,14,0,
	5,7,9,7,9,9,0,
	5,14,1,6,8,7,0,
	4,7,2,2,2,2,0,
	5,9,9,9,9,6,0,
	6,17,17,17,10,4,0,
	6,17,17,21,21,10,0,
	5,9,9,6,9,9,0,
	6,17,10,4,4,4,0,
	4,7,4,2,1,7,0,
	3,3,1,1,1,3,0,
	0,0,0,0,0,0,0,
	3,3,2,2,2,3,0,
	4,2,5,0,0,0,0,
	4,0,0,0,0,0,7,
	2,1,2,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,
	4,6,2,1,2,6,0,
	2,1,1,1,1,1,0,
	4,3,2,4,2,3,0,
	5,0,10,5,0,0,0,
	0,0,0,0,0,0,0
};


unsigned char screen[512];

// // trigger a keypad scan
// ISR(TIMER1_COMPA_vect)
// {
// 	TCNT1 = 0;
// }

void write_command(char c)
{
	PORTB &= ~PIN_CS;
	PORTB &= ~PIN_DC;
	// PORTB &= ~PIN_WR;
	// PORTD = c;
	SPDR = c; 
	while(!(SPSR & (1<<SPIF)))
		;
	// PORTB |= PIN_WR;
	PORTB |= PIN_CS;
}

void write_data(char c)
{
	PORTB &= ~PIN_CS;
	PORTB |= PIN_DC;
	// PORTB &= ~PIN_WR;
	// PORTD = c;
	SPDR = c; 
	while(!(SPSR & (1<<SPIF)))
		;
	// PORTB |= PIN_WR;
	PORTB |= PIN_CS;
}

void redraw_full_screen()
{
	int i;
	for(i=0;i<4096;i++) write_data(screen[i]);
}


void draw_pixel(char x, char y, char a)
{
	a &= 0x0f; // scrub off left four bits
	int position = (y * 64) + (x/2);
	if(!(x & 1))
	{
		screen[position] &= 0xf0;
		screen[position] |= a;
	}
	else
	{
		screen[position] &= 0x0f;
		screen[position] |= (a<<4);
	}
}

void draw_char(int x, int y, int c, int a)
{
	//magic numbers: 8 = height, 8 = width
	int row, col;
	for(row=0;row<6;row++)
		for(col=0;col<6;col++)
			// draw_pixel(x+col, y+row, ((rom_font[c][row] & (1<<(7-col)))!=0)*a);
			draw_pixel(x+col, y+row, ((rom_font[(c*7)+row+1] & (1<<col))!=0)*a);
}


void draw_string(int x, int y, char *str, int a)
{
	// have no idea why 0 works and not '/0' for null terminator
	while(*str != 0) {
		draw_char(x, y, *str, a);
		x += rom_font[(*str * 7)];
		str++;
	}
}


// main
// ===============================================================
// ===============================================================
// ===============================================================
// ===============================================================
int main(void)
{
	int i, n = 0;
	
	// uint8_t i1, i2, i3, i4;

	DDRB = 0xff;	// output
	DDRD = 0xff;

	
	// keypad interrupt
	// TCCR1A = 0;
	// TCCR1B = (1<<CS12) | (1<<CS10);
	// TIMSK1 = (1<<OCIE1A);
	// OCR1A = KEYPAD_REFRESH_RATE;


	SPCR = (1<<SPE)|(1<<MSTR)|(1<<SPI2X); //Enable SPI, Master, set clock rate fck/16
	
	PORTB = 0;
		
	PORTB |= PIN_RESET;
	_delay_ms(1);
	write_command(0xAE);	// off
	write_command(0x86);	// full current range
	write_command(0xA4);	// normal display
	write_command(0x81);	// contrast to full
	write_command(0x7F);
	write_command(0xA8);	// multiplex
	write_command(0x3F);
	write_command(0xBC);	// precharge
	write_command(0x10);
	write_command(0xBE);	// voltage
	write_command(0x1C);
	write_command(0xAD);	// dcdc
	write_command(0x02);
	write_command(0xA0);	// remap
	write_command(0x50);
	write_command(0xA1);	// start
	write_command(0x0);
	write_command(0xA2);	// offset
	write_command(0x4C);
	write_command(0xB1);	// set phase
	write_command(0x55);
	
	// set update box (to full screen)
	write_command(0x15);
	write_command(0);
	write_command(63);
	write_command(0x75);
	write_command(0);
	write_command(63);
	
	// clear data
	for(i = 0; i < 4096; i++){
		write_data(0);	
	}
	
	for(i = 0; i < 512; i++){
		screen[i] = 0;
	}
	
	write_command(0xAF);	// on
	
	
	_delay_ms(100);
	

	// sei();
		
	i = n = 0;

	
	// loop
	// ===============================================================
	// ===============================================================
	while(1) {
		draw_string(0,1,"/DSP/FEEDBACK           23.45",255);
		for(n=0;n<512;n++) {
			//_delay_ms(10);
			//redraw_full_screen();
			write_data(screen[n]^0xff);
		}
		for(i = 0; i < 512; i++){
			screen[i] = 0;
		}
		
		draw_string(0,1,"/ANALOG/FILTER1/CUTOFF   200",255);
		for(n=0;n<512;n++) {
			//_delay_ms(10);
			//redraw_full_screen();
			write_data(screen[n]);
		}
		for(i = 0; i < 512; i++){
			screen[i] = 0;
		}

		draw_string(0,1,"ABCDEFGHIJKLMNOPQRSTUVWXYZ",255);
		for(n=0;n<512;n++) {
			//_delay_ms(10);
			//redraw_full_screen();
			write_data(screen[n]);
		}
		for(i = 0; i < 512; i++){
			screen[i] = 0;
		}

		draw_string(0,1,"ALEPH 1234567890.20:00-2",255);
		for(n=0;n<512;n++) {
			//_delay_ms(10);
			//redraw_full_screen();
			write_data(screen[n]);
		}
		for(i = 0; i < 512; i++){
			screen[i] = 0;
		}

		draw_string(0,1,"HELLO, WORLD. REALLY?",255);
		for(n=0;n<512;n++) {
			//_delay_ms(10);
			//redraw_full_screen();
			write_data(screen[n]);
		}
		for(i = 0; i < 512; i++){
			screen[i] = 0;
		}

		draw_string(0,1,"GATHER LEARN FOLLOW ATTACH",255);
		for(n=0;n<512;n++) {
			//_delay_ms(10);
			//redraw_full_screen();
			write_data(screen[n]);
		}
		for(i = 0; i < 512; i++){
			screen[i] = 0;
		}

		draw_string(0,1,"X: 20.3   Y: 12.4   Z: 23.1",255);
		for(n=0;n<512;n++) {
			//_delay_ms(10);
			//redraw_full_screen();
			write_data(screen[n]);
		}
		for(i = 0; i < 512; i++){
			screen[i] = 0;
		}

		draw_string(0,1,"THAT IS THAT.",255);
		for(n=0;n<512;n++) {
			//_delay_ms(10);
			//redraw_full_screen();
			write_data(screen[n]);
		}
		for(i = 0; i < 512; i++){
			screen[i] = 0;
		}

		while(1);


		// for(n=0;n<3584;n++) {
		// 	//_delay_ms(10);
		// 	//redraw_full_screen();
		// 	write_data(0);//screen[n]);
		// }
		
		_delay_ms(100);
		
		//for(n=0;n<8-(i%9);n++)
		//	draw_pixel(i,(i%9) + n,15);
		
		// screen[i] = 255;
		
		//draw_char(i+30,0,0,255);
		// for(row=0;row<8;row++)
		// 	for(col=0;col<8;col++)
		// 		draw_pixel(30+col+i, row, (rom_font[77][row] & (1<<col))!=0);


	}
	
	return 0;
}